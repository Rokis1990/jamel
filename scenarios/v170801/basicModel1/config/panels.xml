<?xml version="1.0" encoding="UTF-8"?>

<!-- 1er août 2017 -->

<gui
	className="jamel.v170801.gui.BasicGui"
	refresh="6"
>

	<panel title="Main">

		<chart title="Costs and Prices">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Unit Cost"
				color="red"
			>
				<x>t</x>
				<y>
					val(Firms, supplyCost, t-2...t, sum) / val(Firms, supplyVolume,
					t-2...t, sum)
				</y>
			</series>
			<series
				label="Unit Price"
				color="blue"
			>
				<x>t</x>
				<y>
					val(Firms, supplyValue, t-2...t, sum) / val(Firms, supplyVolume,
					t-2...t, sum)
				</y>
			</series>
			<yAxis label="Value" />

		</chart>
		<chart title="Deposits">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Firms"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, money, t, sum)</y>
			</series>
			<series
				label="Workers"
				color="blue"
			>
				<x>t</x>
				<y>val(Workers, money, t, sum)</y>
			</series>
			<series
				label="Shareholders"
				color="green"
			>
				<x>t</x>
				<y>val(Shareholders, money, t, sum)</y>
			</series>
			<yAxis label="Value" />
		</chart>
		<empty />
		<col />

		<chart title="Firms Balance Sheet">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Tangible assets"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, tangibleAssets, t, sum)</y>
			</series>
			<series
				label="Money"
				color="blue"
			>
				<x>t</x>
				<y>val(Firms, money, t, sum)</y>
			</series>
			<series
				label="Liabilities"
				color="green"
			>
				<x>t</x>
				<y>val(Firms, liabilities, t, sum)</y>
			</series>
			<yAxis label="Value" />
		</chart>

		<chart title="Firms Debt Ratio">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Debt ratio"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, liabilities, t, sum) / val(Firms, assets, t, sum)</y>
			</series>
			<yAxis
				label="%"
				min="0"
				max="1" />
		</chart>

		<chart title="Goods Market">

			<if>isEqual(t%3, 0)</if>

			<series
				label="Supply"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, supplyValue, t-2...t, sum)</y>
			</series>

			<series
				label="Demand"
				color="blue"
			>
				<x>t</x>
				<y>
					val(Workers, consumptionBudget, t-2...t, sum)
					+ val(Shareholders,
					consumptionBudget, t-2...t, sum)
				</y>
			</series>

			<yAxis label="Value" />

		</chart>

		<col />

		<chart title="Banks Balance Sheet">

			<if>isEqual(t%3, 0)</if>

			<series
				label="Assets"
				color="blue"
			>
				<x>t</x>
				<y>val(Banks, assets, t, sum)</y>
			</series>

			<series
				label="liabilities"
				color="red"
			>
				<x>t</x>
				<y>val(Banks, liabilities, t, sum)</y>
			</series>

			<yAxis label="Value" />

		</chart>

		<chart title="Goods Market">

			<if>isEqual(t%3, 0)</if>

			<series
				label="Production"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, productionVolume, t-2...t, sum)</y>
			</series>

			<series
				label="Sales"
				color="blue"
			>
				<x>t</x>
				<y>val(Firms, salesVolume, t-2...t, sum)</y>
			</series>

			<series
				label="Consumption"
				color="green"
			>
				<x>t</x>
				<y>val(Workers, consumptionVolume, t-2...t, sum)
					+ val(Shareholders,
					consumptionVolume, t-2...t, sum)
				</y>
			</series>

			<yAxis label="Volume" />

		</chart>

		<chart title="Good Market">

			<if>isEqual(t%3, 0)</if>

			<series
				label="Supply"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, supplyVolume, t-2...t, sum)</y>
			</series>

			<series
				label="demand"
				color="blue"
			>
				<x>t</x>
				<y>
					(val(Workers, consumptionBudget, t-2...t, sum) +
					val(Shareholders, consumptionBudget, t-2...t, sum)) *
					val(Firms,supplyVolume,t-2...t, sum) /
					val(Firms,supplyValue,t-2...t, sum)
				</y>

			</series>

			<yAxis label="Volume" />

		</chart>

	</panel>

	<panel title="Labor Market">
		<chart title="Workers (green), Employed (blue)">
			<series
				label="#Workers"
				color="green"
			>
				<x>t</x>
				<y>val(Workers, countAgent, t, sum)</y>
				<color>green</color>
			</series>
			<series
				label="#Employed"
				color="blue"
			>
				<x>t</x>
				<y>val(Workers, employed, t, sum)</y>
			</series>
			<xAxis label="Time" />
		</chart>
		<chart title="Job offers">
			<series color="red">
				<x>t</x>
				<y>val(Firms, jobOffers, t, sum)</y>
			</series>
			<xAxis label="Time" />
		</chart>

		<empty />
		<col />
		<empty />

		<col />
		<html title="Commit">
			2017-07-25 (basic model)
			<br />
			<br />
			JamelChartFactory: Ajout d'une légende des graphes,
			<br />
			DataManager: somme des données sur plusieurs périodes,
			<br />
			DataManager: création d'un pool d'expressions,
			<br />
			DataManager: création de caches pour les résultats des calculs,
			<br />
			BasicSector: ouverture/fermeture automatique des agents,
			<br />
			JamelChartFactory: axes x=0, y=0, affichés par défaut,
			<br />
			Parameters: nouvel objet qui encapsule les paramètres et facilite le
			parsing des données XML,
			<br />
			Households: paramétrisation des comportements,
			<br />
			scenario_0: mise à jour,
			<br />
			panels_0: mise à jour.
		</html>

	</panel>
	<panel title="Workers">
		<html title="Presentation">
			Les "Workers" sont une des deux catégories de ménages
			du modèle.
		</html>

		<chart title="Deposits">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Workers"
				color="green"
			>
				<x>t</x>
				<y>val(Workers, money, t, sum)</y>
			</series>
			<yAxis label="Value" />
		</chart>
		<empty />
		<col />

		<chart title="Consumption">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Budget"
				color="red"
			>
				<x>t</x>
				<y>val(Workers, consumptionBudget, t-2...t, sum)</y>
			</series>

			<series
				label="Consumption"
				color="blue"
			>
				<x>t</x>
				<y>val(Workers, consumptionValue, t-2...t, sum)</y>
			</series>

			<yAxis label="Value" />

		</chart>

		<empty />
		<empty />
		<col />
		<empty />

	</panel>

	<panel title="Shareholders">
		<html title="Presentation">
			Les "Shareholders" sont une des deux catégories de
			ménages du modèle.
		</html>

		<chart title="Deposits">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Shareholders"
				color="green"
			>
				<x>t</x>
				<y>val(Shareholders, money, t-2...t, sum)</y>
			</series>
			<yAxis label="Value" />
		</chart>
		<empty />
		<col />

		<chart title="Consumption">
			<if>isEqual(t%3, 0)</if>

			<series
				label="Budget"
				color="red"
			>
				<x>t</x>
				<y>val(Shareholders, consumptionBudget, t-2...t, sum)</y>
			</series>

			<series
				label="Consumption"
				color="blue"
			>
				<x>t</x>
				<y>val(Shareholders, consumptionValue, t-2...t, sum)</y>
			</series>

			<yAxis label="Value" />

		</chart>

		<chart title="Suppliers">
			<series
				label="#Suppliers by Household"
				color="red"
			>
				<x>t</x>
				<y>val(Shareholders, suppliers, t, sum) / val(Shareholders, count,
					t, sum)
				</y>
			</series>
			<series
				label="# of the Selection"
				color="blue"
			>
				<x>t</x>
				<y>val(Shareholders, supplierSample, t, sum) / val(Shareholders,
					count, t, sum)
				</y>
			</series>
			<yAxis label="Number" />
		</chart>

		<chart title="Supply and demand">
			<series
				label="Supply"
				color="red"
			>
				<x>t</x>
				<y>val(Shareholders, supplyValue, t-2...t, sum)</y>
			</series>
			<series
				label="Demand"
				color="blue"
			>
				<x>t</x>
				<y>val(Shareholders, consumptionBudget, t-2...t, sum)</y>
			</series>
			<series
				label="Consumption"
				color="green"
			>
				<x>t</x>
				<y>val(Shareholders, consumptionValue, t-2...t, sum)</y>
			</series>
			<yAxis label="Value" />
		</chart>

		<col />

		<empty />

	</panel>

	<panel title="Firms">
		<html title="Presentation">
			Les "Firms" produisent un bien unique, qui est un
			bien de consommation.
		</html>

		<chart title="Deposits">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Firms"
				color="green"
			>
				<x>t</x>
				<y>val(Firms, money, t, sum)</y>
			</series>
			<yAxis label="Value" />
		</chart>

		<chart title="Inventories">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Firms"
				color="green"
			>
				<x>t</x>
				<y>val(Firms, inventoriesVolume, t, sum)</y>
			</series>
			<yAxis label="Volume" />

		</chart>

		<col />

		<chart title="Markups">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Average Markup"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, markup, t, sum)/val(Firms, count, t, sum)</y>
			</series>

			<yAxis label="%" />

		</chart>

		<chart title="Delta Markup">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Average Delta Markup"
				color="red"
			>
				<x>t</x>
				<y>val(Firms, deltaMarkup, t, sum)/val(Firms, count, t, sum)</y>
			</series>

			<yAxis label="%" />

		</chart>

		<chart title="Inventories">
			<if>isEqual(t%3, 0)</if>
			<series
				label="Firms"
				color="green"
			>
				<x>t</x>
				<y>val(Firms, inventoriesVolume, t, sum) / val(Firms, count, t, sum)
				</y>
			</series>
			<yAxis label="Volume" />

		</chart>

		<col />
		<empty />

	</panel>

	<panel title="Performances">
		<chart title="Simulation Speed">
			<series label="Average">
				<x>t</x>
				<y>1000*t/duration</y>
			</series>
			<series label="Instantaneous">
				<x>t</x>
				<y>1000*speed</y>
			</series>
			<yAxis label="Periods by second" />
		</chart>

		<chart title="Memory usage">
			<series label="Total Memory">
				<x>t</x>
				<y>totalMemory/1000000</y>
			</series>
			<series label="Free Memory">
				<x>t</x>
				<y>freeMemory/1000000</y>
			</series>
			<yAxis label="Megabytes" />
		</chart>

		<col />

		<html>
			Period:
			<data format="##0">t</data>
			<br />
			Simulation duration:
			<data format="##0">duration/1000</data>
			s
			<br />
			Instantaneous speed:
			<data format="##0.00">1000*speed</data>
			Periods by second
			<br />
			Average speed:
			<data format="##0.00">1000*t/duration</data>
			Periods by second
			<br />
			Total memory:
			<data format="##0.00">totalMemory/1000000</data>
			MB
			<br />
			Free memory:
			<data format="##0.00">freeMemory/1000000</data>
			MB
			<br />
		</html>

	</panel>

	<panel title="About">
		<html src="about.xml"/>
	</panel>
</gui>